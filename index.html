<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê¸¸ë“œì „ ê°€ì´ë“œ</title>
    <style>
        /* ë‹¤í¬ ë„¤ì˜¨ ìŠ¤íƒ€ì¼ (ì´ë¯¸ì§€ ì°¸ê³ ) */
        body { background-color: #121212; color: #fff; font-family: sans-serif; text-align: center; }
        .container { max-width: 400px; margin: 0 auto; padding: 20px; }
        .box {
            border: 2px solid #333; border-radius: 10px; padding: 20px; margin-bottom: 20px;
            box-shadow: 0 0 10px rgba(0,0,0,0.5);
        }
        .neon-blue { border-color: #00ffff; box-shadow: 0 0 10px #00ffff; }
        .neon-green { border-color: #00ff00; box-shadow: 0 0 10px #00ff00; }
        .neon-red { border-color: #ff0000; box-shadow: 0 0 10px #ff0000; }

        input, select, textarea {
            width: 90%; padding: 10px; margin: 5px 0; background: #222; border: 1px solid #555; color: white;
        }
        button {
            width: 100%; padding: 10px; background: #333; color: white; border: none; cursor: pointer; font-weight: bold;
        }
        button:hover { background: #555; }
        .hidden { display: none; }
    </style>
</head>
<body>

<div class="container">
    <h1>ğŸ”¥ ê¸¸ë“œì „ ê°€ì´ë“œ</h1>

    <div id="step1" class="box neon-blue">
        <h3>1. ë¡œê·¸ì¸</h3>
        <input type="text" id="myNick" placeholder="ë³¸ì¸ ë‹‰ë„¤ì„">
        <input type="password" id="myKey" placeholder="ë°œê¸‰ë°›ì€ í‚¤">
        <button onclick="login()">ë¡œê·¸ì¸</button>
    </div>

    <div id="mainArea" class="hidden">

        <div id="step2" class="box neon-green">
            <h3>2. ê³µê²© ëŒ€ìƒ ì„ íƒ</h3>
            <select id="enemySelect" onchange="loadStrategy()">
                <option value="">-- ìƒëŒ€ ë°©ì–´íŒ€ ì„ íƒ --</option>
                <option value="Enemy_Ace">ì—ì´ìŠ¤ (ë°©ì–´ë±: ë£¨ë””/ë¸ë¡ ì¦ˆ)</option>
                <option value="Enemy_Evan">ì—ë°˜ (ë°©ì–´ë±: ì œì´ë¸Œ/ì•„ì¼ë¦°)</option>
            </select>
        </div>

        <div id="step3" class="box" style="border-color: gold; box-shadow: 0 0 10px gold;">
            <h3>3. ì¶”ì²œ ì„¸íŒ…</h3>
            <div id="strategyDisplay">ëŒ€ìƒì„ ì„ íƒí•˜ë©´ ê³µëµì´ ëœ¹ë‹ˆë‹¤.</div>
        </div>

        <div id="step4" class="box neon-red">
            <h3>4. ê²°ê³¼ ê¸°ë¡</h3>
            <button onclick="recordResult('WIN')" style="background:#00aa00; margin-bottom:5px;">ìŠ¹ë¦¬ (3ë³„)</button>
            <button onclick="recordResult('LOSE')" style="background:#aa0000;">íŒ¨ë°°</button>
        </div>

        <div id="step5" class="box" style="border-color: purple; box-shadow: 0 0 10px purple;">
            <h3>5. ê³µëµ ì œë³´</h3>
            <textarea id="reportComment" placeholder="ë‚˜ë§Œì˜ ê¿€íŒ ì œë³´í•˜ê¸°"></textarea>
            <button onclick="report()">ì œë³´í•˜ê¸°</button>
        </div>

    </div>
</div>

<script>
    // ì•„ê¹Œ ë°°í¬í•œ Google Apps Script URLì„ ì—¬ê¸°ì— ë„£ìœ¼ì„¸ìš”
    const GAS_URL = "https://script.google.com/macros/s/AKfycbyDHVwpbFVz7jJzv5v40tgV-32IRiVRrjnFxcrx6elyeyCPraurebHzQQziVAuBZd64/exec";
    let currentUser = "";

    function login() {
        const nick = document.getElementById('myNick').value;
        const key = document.getElementById('myKey').value;

        // ì‹¤ì œë¡œëŠ” fetchë¡œ ì„œë²„ ê²€ì¦ì„ í•´ì•¼ í•˜ì§€ë§Œ, UI í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ ê°„ë‹¨íˆ ì²˜ë¦¬
        if(nick && key) {
            // fetch(GAS_URL, { ... }) // ì‹¤ì œ êµ¬í˜„ ì‹œ ì—¬ê¸°ì„œ í†µì‹ 
            currentUser = nick;
            alert(nick + "ë‹˜ í™˜ì˜í•©ë‹ˆë‹¤!");
            document.getElementById('step1').classList.add('hidden');
            document.getElementById('mainArea').classList.remove('hidden');
        } else {
            alert("ì •ë³´ë¥¼ ì…ë ¥í•˜ì„¸ìš”.");
        }
    }

    function loadStrategy() {
        const enemy = document.getElementById('enemySelect').value;
        const display = document.getElementById('strategyDisplay');

        // ì˜ˆì‹œ ë°ì´í„° (ì‹¤ì œë¡œëŠ” fetchë¡œ GASì—ì„œ ë°›ì•„ì˜´)
        if(enemy === "Enemy_Ace") display.innerHTML = "ğŸ’¡ <b>ì¶”ì²œ:</b> ë§ˆê³µ ë± ì‚¬ìš© (ë¦° í¬í•¨ í•„ìˆ˜)<br>âš ï¸ ì£¼ì˜: ìƒíƒœì´ìƒ ë©´ì—­ ì±™ê¸°ê¸°";
        else if(enemy === "Enemy_Evan") display.innerHTML = "ğŸ’¡ <b>ì¶”ì²œ:</b> ë¬¼ê³µ ë± ì‚¬ìš© (ì œì´ë¸Œ ì¹´ìš´í„°)";
        else display.innerHTML = "ëŒ€ìƒì„ ì„ íƒí•˜ì„¸ìš”.";
    }

    function recordResult(result) {
        const enemy = document.getElementById('enemySelect').value;
        if(!enemy) return alert("ìƒëŒ€ë¥¼ ë¨¼ì € ì„ íƒí•˜ì„¸ìš”.");

        // Google Apps Scriptë¡œ ë°ì´í„° ì „ì†¡
        const data = { action: "record", nickname: currentUser, enemyName: enemy, result: result };

        // no-cors ëª¨ë“œëŠ” ì‘ë‹µì„ ì½ì„ ìˆ˜ ì—†ì§€ë§Œ ì „ì†¡ì€ ë¨ (ê°„í¸ êµ¬í˜„ìš©)
        fetch(GAS_URL, {
            method: "POST",
            mode: "no-cors",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(data)
        }).then(() => {
            alert("ê²°ê³¼ê°€ ê¸°ë¡ë˜ì—ˆìŠµë‹ˆë‹¤: " + result);
        });
    }

    function report() {
        const enemy = document.getElementById('enemySelect').value;
        const comment = document.getElementById('reportComment').value;
        if(!enemy || !comment) return alert("ìƒëŒ€ ì„ íƒ ë° ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”.");

        const data = { action: "report", nickname: currentUser, enemyName: enemy, comment: comment };

        fetch(GAS_URL, {
            method: "POST",
            mode: "no-cors",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(data)
        }).then(() => {
            alert("ì œë³´ ê°ì‚¬í•©ë‹ˆë‹¤!");
            document.getElementById('reportComment').value = "";
        });
    }
</script>

</body>
</html>